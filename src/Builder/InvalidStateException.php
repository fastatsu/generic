<?php

namespace Fastatsu\Generic\Builder;

abstract class InvalidStateException extends \Exception
{
    public function __construct(
        public readonly string $parameterName,
        string $message = "",
        int $code = 0,
        ?\Throwable $previous = null
    ) {
        parent::__construct($message, $code, $previous);
    }
    public static function fromParameter(string $name): static
    {
        return new static(
            $name,
            sprintf('%s config error: missing required parameter "%s"', static::builderClass(), $name)
        );
    }
    public static function builderClass(): string
    {
        throw new \BadMethodCallException(__METHOD__ . ' should be implemented in child class');
    }
}
